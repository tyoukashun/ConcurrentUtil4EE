<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">

    <f:view contentType="text/html">
        <h:head>
            <f:facet name="first">
                <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>
                <title>ユーザ登録画面</title>
            </f:facet>
        </h:head>
        <h:body>
            <h:form>
                <table border="1">
                    <tr>
                        <TD>
                            <h:outputLabel value="名前"/> 
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.name}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="フリガナ"/>
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.katakananame}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="メール・アドレス"/>
                        </TD>
                        <TD>
                            <h:inputText id="email" value="#{person.emailaddress}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="性別"/>                            
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.sex}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="生年月日"/> 
                        </TD>
                        <TD>
                            <h:inputText maxlength="10" value="#{person.birthyear}"/>年
                            <h:inputText maxlength="4" value="#{person.birthmonth}"/>月
                            <h:inputText maxlength="4" value="#{person.birthday}"/>日
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="都道府県"/>
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.prefecture}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="市町村"/>
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.city}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="番地"/> 
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.address}"/>
                        </TD>
                    </tr>

                    <tr>
                        <TD>
                            <h:outputLabel value="電話番号"/>
                        </TD>
                        <TD>
                            <h:inputText maxlength="128" value="#{person.phonenumber}"/>
                        </TD>
                    </tr>


                    <tr>
                        <TD>
                            <h:outputLabel value="パスワード"/>
                        </TD>
                        <TD>
                            <h:inputSecret maxlength="128" value="#{person.password}"/>
                        </TD>
                    </tr>
                    <tr>
                        <TD>
                            <h:outputLabel value="パスワード(確認用)"/>
                        </TD>
                        <TD>
                            <h:inputSecret maxlength="128" value="#{person.password2}"/>
                        </TD>
                    </tr>
                </table>


                <h:commandButton value="同期メール送信 from EJB" action="#{jSFManagedBean.pushSyncEmailSenderEJB()}"/><br/>
                <h:commandButton value="非同期メール送信 from EJB" action="#{jSFManagedBean.pushAsyncEmailSenderEJB()}"/><br/>
                <h:commandButton value="JMS(MDB) を使用したメール配信" action="#{jSFManagedBean.pushJMSRegister()}"/><br/>

                <h:link outcome="callMailSendServlet.xhtml" value="非同期メール送信 from サーブレット"/><br/>

                <h:commandButton value="管理された Executor Service の実行" action="#{jSFManagedBean.pushManagedExecService()}"/><br/>
                <h:commandButton value="管理された Executor Service の実行 2(返り値の取得)" action="#{jSFManagedBean.pushManagedExecService2()}"/><br/>
                <h:commandButton value="サポート外のタスク生成＆実行" action="#{jSFManagedBean.pushUnsupportedCreateNewThread()}"/><br/>
                <h:commandButton value="コンテキスト・サービスによるタスク実行" action="#{jSFManagedBean.pushExecContextService()}"/><br/>
                <h:commandButton value="スケジューリングによるタスク実行" action="#{jSFManagedBean.pushScheduledExecService()}"/><br/>
                <h:commandButton value="タスク・リスナーで処理をラップして実行" action="#{jSFManagedBean.pushTaskListenerSample()}"/><br/>                
                <h:commandButton value="スレッド・ファクトリから生成したスレッドでタスクを実行" action="#{jSFManagedBean.pushThreadFactorySample()}"/><br/>                
                
            </h:form>
            <br />
            
            ※1 本プログラムを動作させるために、AppServer-メールサーバの設定が必要 <br/>
            GlassFish v4.0 でGMailに接続する場合<br/>
            asadmin コマンドで下記を実行<br/>
            # <B>asadmin create-javamail-resource <br/>
            --mailhost "smtp.gmail.com" <br/>
            --mailuser "foo@gmail.com" <br/>
            --fromaddress "foo@gmail.com" <br/>
            --property "mail.smtp.socketFactory.class=javax.net.ssl.SSLSoc ketFactory:mail.smtp.socketFactory.port=465:mail.smtp.port=465:mail.smtp.socketFactory.fallback=false:mail.smtp.auth=true:mail.smtp.password=[FOO's Password]" 
            mail/MyMailSession</B><br/>
            <br/><br/>
            ※2 本プログラムを動作させるために、AppServer の MQ の物理送信先の設定が必要<br/>
            GlassFish v4.0 で MQ の物理宛先の設定方法<br/>
            asadmin コマンドで下記を実行<br/>
            #<B> asadmin create-jms-resource <br/>
            --restype javax.jms.Queue<br/> 
            --property Name=registQueue<br/>
            jms/mailRegistQueue</B><br/><br/>
            
            
            ※3 本プログラムを動作させるために、AppServer でJDBCリソースの設定が必要<br/>
            GlassFish v4.0 で JDBC リソースの設定方法(Derbyを利用する場合)<br/>
            asadmin コマンドで下記を実行<br/>
            #<B>asadmin create-jdbc-resource <br/>
                --connectionpoolid DerbyPool <br/>
                jdbc/sample</B><BR/>
        </h:body>
    </f:view>
</html>
